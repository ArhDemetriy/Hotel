@use 'sass:map';
@import '../global_mixins/global_mixins';

.rate{
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  -webkit-user-select: none;
  user-select: none;

  cursor: pointer;

  background: map.get($gradient, 'main');
  margin: 0px;
  padding: 0px;

  & *{
    border: solid red 1px;
  }

  &__star_b, &__star_f{
    background: white; //важен сам факт установки значения, значение = white независимо от того что тут указано, всегда
    mix-blend-mode: screen; //виновен в этом данный параметр, но без него градиентный текст придётся делать картинками.
  }

  position: relative;
  $n: 5;
  $r: 2;
  @if $r > $n {$r: $n}
  @for $i from 1 through $r {
    --r-s-#{$i} : inline;
    --r-b-#{$i} : none;
  }
  $i: $r + 1; @while $i <= $n {
    --r-s-#{$i} : none;
    --r-b-#{$i} : inline;
    $i: $i + 1;
  }

  @for $i from 1 through $n {
    &__#{$i}{
      &.rate__star_f{
        display: var(--r-s-#{$i});
      }
      &.rate__star_b{
        display: var(--r-b-#{$i});
      }
    }
  }

  &:hover{
    & > .rate__star_f{
      display: inline;
    }
    & > .rate__star_b{
      display: none;
    }
  }

  &__star_f:hover{
    & ~ .rate__star_f{
      display: none;
    }
    & ~ .rate__star_b{
      display: inline;
    }
  }

  &__0{
    display: inline-block;
    position: absolute;
    left: -0.2em;

    //border: red solid 1px;
    height: 1em;
    width: 0.3em;
    &:hover{
      & ~ .rate__star_f{
        display: none;
      }
      & ~ .rate__star_b{
        display: inline;
      }
    }
  }
}